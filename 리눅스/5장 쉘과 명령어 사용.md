# 5장 쉘과 명령어 사용

## 쉘

쉘은 사용자와 운영체제 사이의 창구 역할을 하는 소프트웨어

명령어 처리기, 명령어를 입력 받아 이를 처리

### 쉘의 종류

- **본 쉘 → /bin/sh**
- **콘 쉘 → /bin/ksh**
- **C 쉘 → /bin/csh**
    - C 언어의 특징, BSD 유닉스 계열에서 많이 사용, 이를 개선한 tcsh 나옴
- **Bash → /bin/bash**
    - GNU에서 **본 쉘**을 확장하여 개발한 쉘
    - Bash의 명령어 구문은 본 쉘 명령어 구문을 확장
    - 리눅스 및 맥 OS X의 기본 쉘
- **tcsh → /bin/tcsh**

**로그인 쉘**

로그인 시 자동으로 실행되는 쉘이며 보통 시스템 관리자가 계정을 만들 때 로그인 쉘을 지정해 줌.  /etc/passwd에 저장되어 있다.

### 쉘의 주요 기능

1. **명령어 처리** : 사용자가 입력한 명령을 해석하고 적절한 프로그램 실행
2. **시작 파일** : 로그인할 때 실행되어 사용자 별 맞춤형 사용 환경 설정
3. **스크립트** : 쉘 내부의 프로그래밍 기능

**실행 절차**

![Untitled](5%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%89%E1%85%B0%E1%86%AF%E1%84%80%E1%85%AA%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%85%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%A5%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%201d066ad2d27d49e4ac1c9ccdf5d338ff/Untitled.png)

### 쉘 환경 설정

**변수** : 시스템/사용자가 사용하는 정보 저장, 대문자 사용

**shell 변수** : 현재 쉘에서 사용 가능한 변수 (지역 변수)

**환경 변수** : 전체 쉘에서 사용 가능한 변수 (전역 변수)

**$ 변수명** = 문자열 : 변수의 값을 문자열로 설정

**$ env** : 환경변수 보기

**$ export 변수 :** 변수를 환경변수로 설정

### 쉘의 시작 파일

**시작 파일**

- 쉘 시작 시 자동으로 실행되는 고유 파일
- 주로 사용자 환경을 설정, 환경 변수에 적절한 값 설정
- profile과 bashrc 파일 존재

**시스템 시작 파일**

- 시스템의 모든 사용자에게 적용되는 공통적인 설정
- 환경변수 설정, 명령어로 경로 설정, 환경 메시지 출력 등

**사용자 시작 파일**

- 사용자 홈 디렉터리에 있으며 각 사용자에게 적용되는 설정
- 환경변수 설정, 프롬포트 설정, 명령어 경로 설정, 명령어 별명 설정 등

## 전면 처리와 후면 처리

리눅스/유닉스는 멀티태스킹 시스템이다.

**전면 처리** : $ 명령어

- 입력된 명령어를 전면(foreground)에서 실행하고 쉘은 명령어 실행이 끝날 때 까지 대기 → 다른 명령어 실행 불가

**후면 처리** : $ 명령어 &

- 명령어를 후명(background)에서 실행하고 전면에서는 다른 작업 실행하여 여러 작업을 동시에 수행 가능

### 작업과 프로세스

작업(job)은 쉘이 관리하는 프로세스(process)이다. 고로 프로세스 ID(PID)를 보유하고 있으며, 쉘이 할당한 일련번호인 작업 번호(job ID) 또한 보유한다.

쉘은 작업을 시작하고 제어하며, 동시에 여러개의 동작이 가능하게 한다.

### **작업 확인**

**$ jobs [%작업번호]**

후면에서 실행 중인 작업들을 리스트한다. 작업 번호를 명시하면 해당 작업만 리스트 한다.

**$ fg %작업번호**

작업번호에 해당하는 후면 작업을 전면 작업으로 전환

## 입출력 재지정 -리다이렉션

표준 입출력 장치를 변경할 때 특수 기호를 사용한다.

**표준 입력 : <**

**표준 출력 : >, >>**

**표준 오류 : 2>**

**파이프 : |**

### 출력 재지정

**$ 명령어 > 파일**

명령어의 표준 출력을 모니터 대신에 파일에 **저장**한다.

ex) $ cat > 파일 : 입력받은 내용을 파일에 저장

$ cat 파일1 파일2 > 파일3 : 파일1과 파일2 내용을 붙여서 새로운 파일 3 만들기

### 출력 추가

**$ 명령어 >> 파일**

명령어의 표준 출력을 모니터 대신 파일에 **추가**

- 위 >가 저장이었으면 >>는 추가이다.\

### 입력 재지정

**$ 명령어 < 파일**

명령어의 표준 입력을 키보드 대신 파일에서 받는다.

ex) $ wc < 파일 : 파일의 내용으로 wc명령어 사용

### 문서 내 입력

**$ 명령어 << 단어**

**…**

**단어**

명령어의 표준 입력을 키보드 대신에 단어와 단어 사이의 입력으로 받는다.

- 이때 단어는 동일한 단어여야 된다.

### 오류 재지정

**$ 명령어 2> 파일**

명령어의 표준 오류를 모니터 대신에 파일에 저장한다.

### 파이프

명령어의 표준 출력을 명령어의 표준 입력으로 받는 것

**$ 명령어1 | 명령어2**

명령어1의 표준 출력이 파이프를 통해 명령어2의 표준 입력이 된다.

- 명령어1으로 실행되어 나온 결과를 명령어2로 다시 실행.

ex) $ ls | sort -r : 리스트한 결과를 정렬하기.

## 여러 명령어 실행

**$ 명령어1; ….; 명령어n**

나열된 명령어들을 순차적으로 실행

**$ (명령어1; ….; 명령어n)**

나열된 명령어들을 그룹으로 묶어 순차적으로 실행

- 입출력 재지정을 할 때 괄호로 묶어주지 않으면 맨 마지막 명령어에 대해서만 실행 → 괄호로 묶으면 괄호 안 명령어 다 됨.

**$ 명령어1 && 명령어2**

1실행 성공 시 2실행, 1실행 실패 시 2실행 안함.

**$ 명령어1 || 명령어2**

1실행 실패 시 2실행, 1실행 성공 시 2실행.

## 파일 이름 대치와 명령어 대치

### 파일 이름 대치

* : 빈 문자열을 포함해 임의의 문자열을 나타냄

? : 임의의 한 문자를 나타냄

[….] : 대괄호 사이의 문자 하나를 나타내며 부분범위 사용가능 → [abc]들어갈 시 a, b, c따로따로 해줌

### 명령어 대치

**‘명령어’** : 따옴표 안의 명령어는 실행 결과로 대치된 후 실행

- **작은 따옴표** : 대표 문자, 변수, 명령어 모두 대치 제한 → 작은 따옴표 안에서는 문자열로 취급
- **큰 따옴표** : 파일이름 대치만 제한
- 만약 따옴표가 중첩되면 바깥 따옴표만 효력을 가진다.