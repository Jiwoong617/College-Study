# 9장 유틸리티

## 명령어 스케줄링

### 주기적 실행 cron

**cron :** 유닉스의 명령어 스케줄링 시스템으로 crontab 파일에 명시된 대로 주기적으로 명령을 수행

**$ crontab 파일** : crontab 파일을 cron 시스템에 등록

- crontab 파일은 7개의 필드(분 시 일 월 요일 [사용자] 명령)로 구성

**$ crontab [-옵션] [사용자]**

- -l : 사용자의 등록된 crontab 파일 리스트를 보여준다
- -e :                        ‘’               파일을 수정 혹은 생성
- -r :                         ‘’               파일을 삭제한다

**$ at [-f 파일] 시간**

- 지정된 시간에 명령어 실행되도록 등록, 실행할 명령은 표준입력으로 받음
- -f : 실행할 명령들을 파일로 작성해서 등록

**$ atq :** at 시스템의 큐에 등록되어있는 at 작업 확인

**$ at -r 작업번호** : 지정된 작업번호에 해당하는 작업 제거

## 디스크 및 아카이브

**$ df [파일 시스템]** : 파일 시스템에 대한 디스크 사용 정보를 보여줌

### 마운팅

- 미리 제공된 파일 시스템의 디렉터리에 새로운 파일 시스템을 설치하는 절차
- 단일 파일 시스템에서 여러 파일 시스템을 파일 집합으로 결합 가능
- os에게 설치 지점(마운트 포인트)와 마운트하려는 파일 시스템의 위치(장치명)를 제공
- $ mount [옵션] 장치명 마운트 포인트

### 디스크 사용 du

**$ du [-s] 파일**

- 파일이나 디렉터리가 사용하는 디스크 사용량을 알려준다
- 파일을 명시하지 않으면 현재 디렉터리의 사용 공간을 보여줌
- -s : sum

### tar 아카이브

**아카이브** : 백업 또는 다른 장소로의 이동을 위해 여러 파일들을 하나로 묶어놓은 것, 백업 및 다른 장소로의 이동을 위해 사용

**tar 명령어 :** $ tar [옵션] 타르파일

- **$ tar -cvf 타르파일 파일+** : 여러 파일들을 하나의 타르파일로 묶는다
    - 현재 디렉터리의 모든 파일은 *을 써도된다.(문자열 대치 가능)
    - 확장자는 .tar
- **$ tar -xvf 타르파일** : 하나의 타르파일을 풀어서 원래 파일 복원
- **$ tar -tvf 타르파일** : 타르파일의 내용 확인 (무슨 파일이 들어있는지)
- 옵션
    - c : create (생성)
    - v : verbose (상세히?)
    - x : extract (추출)
    - t : table of contents (테이블의 내용)
    - f : file (파일)

## 파일 압축

1. 파일들을 하나의 tar파일로 묶은 후 gzip 또는 comptress를 사용해 압축
2. 압축을 해제한 후, 타르 파일을 풀어서 원래 파일들을 복원한다.

### 파일 압축 : gzip

**$ gzip [-옵션] 파일+ :** 파일들을 압축하여 .gz 파일을 생성

- 옵션
    - -d : 압축 해제 → 파일에는 .gz파일이 들어가야됨
    - -l : 압축 파일 안의 파일 정보를 출력 → .gz파일
    - -r : 하위 디렉터리까지 모두 압축
    - -v : 압축하거나 풀 때 압축률, 파일명을 출력
    

### 압축 풀기

**$ gzip -d 파일.gz**

- -d 옵션을 사용하여 gzip으로 압축된 .gz파일 압축 해제

**$ gunzip 파일.gz**

- gzip으로 압축된 파일 압축 해제

### 파일 압축/복원 : compress

**$ compress 파일+**

- 파일들을 압축하여 .Z파일을 만든다

**$ uncompress 파일.Z**

- 압축된 .Z파일들을 복원

## AWK

**일반 스크립트 언어**로 텍스트 파일의 각 줄을 처리하는 유틸리티이다.

- Aho, Weinberger, Kernighan 3명의 이름 따서 지은것

### AWK 프로그램

- 간단한 프로그램은 명령줄에 직접 작성하여 수행
    - $ awk ‘프로그램’ 파일
- 파일로 작성한 awk 프로그램은 -f 옵션을 사용하여 수행
    - $ awk [-f 프로그램파일] 파일

### **조건과 액션을 기술하는 명령어들로 구성됨.**

- **$ awk ‘[조건] {액션}’ 파일**
- 대상 파일의 각 줄을 스캔하여 조건을 만족하는 줄에 액션을 수행한다.
- 조건을 생략할 시 모든 줄을 처리
- **조건에서 사용 가능한 연산자 및 패턴**
    - BEGIN : 파일 시작
    - END : 파일 끝
    - 관계 연산자 혹은 논리 연산자를 포함함 조건식
    - /패턴/ : 패턴에 해당하는 줄
    - 패턴1, 패턴2 : 패턴1~패턴2
- **액션에서 사용 가능한 문장**
    - if (조건) 실행문 [else 실행문]
    - while (조건) 실행문
    - for (식; 조건; 식) 실행문
    - break/continue
    - 변수 = 식
    - print [식들의 리스트]
    - next : 현재 줄들에 대한 나머지 패턴 건너뛰기
    - exit : 현재 줄의 나머지 부분 건너뛰기
    - {실행문 리스트}
- **주요 내장 변수**
    - $0 : 한 줄 전체
    - $n : 입력 줄의 n번째 필드
    - NF : 현재 줄의 필드 개수
    - NR : 현재 줄의 줄번호
    - ARGC : 명령줄 인수 개수
- **$변수/숫자 : 필드나 변수를 참조한다는 의미**

![Untitled](9%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%B2%E1%84%90%E1%85%B5%E1%86%AF%E1%84%85%E1%85%B5%E1%84%90%E1%85%B5%20dd2cfd76aff84e10a322413b68612de9/Untitled.png)

### AWK 프로그램 작성

확장자 명이 .awk인 파일을 작성하고 -f 옵션으로 사용

ex) awk 프로그램

```c
{ 
	for (I = 1; I <= NF; I += 2)
	printf "%s ", $I
	printf " \n"
}
```

```c
BEGIN { print "파일 시작" }
{ 
	printf "line %d: %d \n", NR, NF;
	line++;
	word += NF
}
END { printf "줄 수 = %d, 단어 수 = %d\n", line, word }
```

## 패키지 관리자

- os를 위해 **일정한 방식**으로 프로그램 설치, 업그레이드, 구성, 제거 과정을 **자동화 하는 소프트웨어 도구 모임**
- 아카이브로 된 소프트웨어 배포판이나 패키지를 처리