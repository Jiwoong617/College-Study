# 해싱

### **해싱**

키 값에 대한 산술적 연산에 의해 **테이블의 주소를 계산하여** 항목에 접근

**해시 테이블 :** 키 값의 연산에 의해 직접 접근이 가능한 구조

**사전 구조** : 맵, 또는 테이블이라 부르며, (키, 값) 두가지 필드로 구성

<br>

## **해시 함수**

- 탐색키를 입력받아 해시 주소 생성
- 생성된 해시 주소가 배열로 구현된 해시 테이블의 인덱스
- 해시테이블의 크기가 제한되므로 존재가능 모든 키에 대해 저장 공간을 할당할 수 없다.
- 충돌과 오버플로우 발생
    - 좋은 해시함수는 충돌이 적어야되며, 해시 함수 값이 고르게 분포, 계산이 빨라야됨.

<br>

1. **제산 함수**

**h(k) = k mod M**

where M(해시 테이블 크기) : 소수 선택

<br>

2. **폴딩 함수**

이동 폴딩과 경계 폴딩

ex) 탐색키 123|456|241|112|20

- 이동폴딩 : 123 + 203 + 241 + 112 + 20 = 699
- 경계폴딩 : 123 + 302 + 241 + 211 + 20 = 897

<br>

3. **중간 제곱 함수**

탐색키를 제곱한 다음 중간의 몇 비트를 취해서 해시주소 생성

<br>

4. **비트 추출 함수**

$M = 2^k$ 일 때, 탐색키를 이진수로 간주하여 임의의 위치의 K개의 비트를 해시주소로 사용

<br>

5. **숫자 분석 방법**

숫자로 구성된 키에서 **각각 위치에 있는 수의 특징**을 알고 있을 때 → 편중되지 않는 수들을 해시테이블의 크기에 적합하게 조합하여 사용

<br>

## 충돌 해결책

**충돌** : 서로 다른 탐색 키를 갖는 항목들이 같은 해시 주소를 가지는 현상

- 충돌이 발생하면 해시 테이블에 항목 저장 불가능

<br>

### 선형조사법

**충돌이 $ht[k]$에서 발생했다면**

1. $**ht[k+1]**$이 비어있는지 조사
2. 비어있지 않다면 $**ht[k+2]$** 조사
3. 비어있는 공간이 나올 때까지 계속 조사
4. 테이블에 끝에 도달 시 다시 테이블의 처음부터 조사
5. 조사를 시작했던 곳으로 돌아온다면 테이블이 가득 찬 것

![Untitled](https://user-images.githubusercontent.com/101644572/173022318-c6bb896e-f8ad-49ab-9ece-cef3d0822f0b.png)

- 군집화와 결합 문제 발생

<br>

### 이차 조사법

선형조사법과 유사하지만, 다음 조사할 위치를 (h(k) + i*i) mod M 사용

- 선형 조사법에선 1, 2, 3 → 1씩 증가하며 조사했지만,
- 이차 조사법에선 1, 4, 9 → 제곱씩 증가하며 조사
- 군집과 결합문제가 크게 완화된다.

<br>

### 이중 해싱법

**재해싱**이라고도 함

- 오버플로우가 발생하면 **원 해시함수와 다른 별개의 해시함수** 사용
    - 원 해시함수가 h(k) = k mod M 이었다면
    - 별개의 해시함수는 h’(k) = C-(k mod C) 이다. (C테이블 크기보다 약간 작은 소수)
- 조사 순서 : h(k) → h(k)+h’(k) → h(k)+2*h’(k) → …

![Untitled 1](https://user-images.githubusercontent.com/101644572/173022344-d335bec6-43f7-44a7-beb2-322102240518.png)


<br>

### 체이닝

- 오버 플로우 문제를 연결 리스트로 해결
    - 각 버켓에 고정된 슬롯을 할당하는게 아닌 삽입과 삭제가 용이한 연결리스트를 할당.
    - 버켓 내에서 원하는 항목을 찾을 때는 연결리스트 순차 탐색

![Untitled 2](https://user-images.githubusercontent.com/101644572/173022377-24923f90-388b-407e-84c4-2a2935617655.png)

<br>

## 해싱의 성능 분석

**적재 밀도** 또는 **적재 비율 :** $a$

- $a = n/M$
- n = 저장된 항목의 개수, M = 해싱 테이블 크기

![Untitled 3](https://user-images.githubusercontent.com/101644572/173022400-eedb09e2-0937-469b-b721-06f2ffe7382c.png)

![Untitled 4](https://user-images.githubusercontent.com/101644572/173022413-4011975b-2c54-4c4b-ad85-770cde655dfc.png)
